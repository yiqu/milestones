(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"7wo0":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingsModule",(function(){return U}));var o=n("ofXK"),i=n("3Pt+"),r=n("37S3"),s=n("UmVK"),a=n("tyNb"),c=n("dq+2"),l=n("1G5W"),b=n("vkgz"),d=n("eIep"),g=n("Pk+l");function f(t){const e=t.value;return e&&e.match(/^[0-9]+([,.][0-9]+)?$/)?null:{numbersOnly:!0}}var u=n("XNiG"),h=n("fXoL"),p=n("kt0X"),m=n("lJxs"),y=n("I/3d");let v=(()=>{class t{constructor(t,e){this.afs=t,this.store=e,this.store.select("appAuth").subscribe(t=>{this.currentUser=t.verifiedUser})}getDocByPath(t){const e=this.currentUser.uid+"/"+t;return console.log(e),this.afs.doc(e).snapshotChanges().pipe(Object(m.a)(t=>(console.log(t.payload.data(),t.payload.metadata,t.payload.ref),t.payload.data())))}setDocByPath(t,e){return this.afs.doc(this.currentUser.uid+"/"+t).set(e)}updateDocByPath(t,e){return this.afs.doc(this.currentUser.uid+"/"+t).update(e)}deleteDocByPath(t){return this.afs.doc(this.currentUser.uid+"/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(h.ac(y.a),h.ac(p.h))},t.\u0275prov=h.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=n("5eHb");let w=(()=>{class t{constructor(t){this.ts=t}getSuccess(t,e){this.ts.success(t,"Success!")}getError(t){this.ts.error(t,"Error occured!")}clearAll(){this.ts.clear()}}return t.\u0275fac=function(e){return new(e||t)(h.ac(k.b))},t.\u0275prov=h.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var V=n("kmnG"),W=n("qFsG"),C=n("bTqV");let O=(()=>{class t{constructor(t){this.router=t,this.loading=!0,this.logoShakeState=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(a.b))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-shared-loading"]],decls:13,vars:0,consts:[[1,"container","loading-container","mt-5"],[1,"row"],[1,"col-sm-12"],[1,"d-flex","loading-parent"],[1,"loading-logo"],["src","assets/banner/milestones-banner-4.png","alt","logo",1,"logo-img","d-inline-block"],[1,"lds-facebook"],[1,"d-flex","loading-parent","secfont"]],template:function(t,e){1&t&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"div",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Rb(5,"img",5),h.Vb(),h.Vb(),h.Wb(6,"div",3),h.Wb(7,"div",6),h.Rb(8,"div"),h.Rb(9,"div"),h.Rb(10,"div"),h.Vb(),h.Vb(),h.Wb(11,"div",7),h.Ec(12," Loading... "),h.Vb(),h.Vb(),h.Vb(),h.Vb())},styles:[".loading-logo[_ngcontent-%COMP%]{height:3rem}.loading-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.loading-container[_ngcontent-%COMP%], .loading-parent[_ngcontent-%COMP%]{justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%]{display:flex;height:100%}.lds-facebook[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:8px;width:16px;background:#007bff;-webkit-animation:lds-facebook 1.2s cubic-bezier(0,.5,.5,1) infinite;animation:lds-facebook 1.2s cubic-bezier(0,.5,.5,1) infinite}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{left:8px;-webkit-animation-delay:-.24s;animation-delay:-.24s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:32px;-webkit-animation-delay:-.12s;animation-delay:-.12s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:56px;-webkit-animation-delay:0;animation-delay:0}@-webkit-keyframes lds-facebook{0%{top:8px;height:64px}50%,to{top:24px;height:32px}}@keyframes lds-facebook{0%{top:8px;height:64px}50%,to{top:24px;height:32px}}"]}),t})();function D(t,e){1&t&&(h.Wb(0,"mat-error"),h.Ec(1," Please enter only numerical values. "),h.Vb())}function P(t,e){1&t&&(h.Wb(0,"mat-error"),h.Ec(1," Field is "),h.Wb(2,"strong"),h.Ec(3,"required"),h.Vb(),h.Vb())}function E(t,e){1&t&&(h.Wb(0,"div",16),h.Ec(1," Please fix your invalid values. "),h.Vb())}function x(t,e){if(1&t){const t=h.Xb();h.Wb(0,"form",9),h.Wb(1,"mat-form-field",10),h.Wb(2,"mat-label"),h.Ec(3,"Total number of work days per year"),h.Vb(),h.Rb(4,"input",11),h.Cc(5,D,2,0,"mat-error",12),h.Cc(6,P,4,0,"mat-error",12),h.Vb(),h.Cc(7,E,2,0,"div",13),h.Wb(8,"div",14),h.Wb(9,"button",15),h.ec("click",(function(){return h.vc(t),h.ic().updateConfig()})),h.Ec(10,"Update"),h.Vb(),h.Vb(),h.Vb()}if(2&t){const t=h.ic();h.oc("formGroup",t.configFg),h.Db(5),h.oc("ngIf",t.workingDaysFc.hasError("numbersOnly")&&!t.workingDaysFc.hasError("required")),h.Db(1),h.oc("ngIf",t.workingDaysFc.hasError("required")),h.Db(1),h.oc("ngIf",!t.formValid)}}function M(t,e){1&t&&h.Rb(0,"app-shared-loading")}const F=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.store=t,this.fb=e,this.afs=n,this.ts=o,this.formValid=!0,this.compDest$=new u.a}get workingDaysFc(){return this.configFg.get("workDays")}ngOnInit(){this.store.select("appAuth").pipe(Object(l.a)(this.compDest$),Object(b.a)(t=>{this.user=t.verifiedUser}),Object(d.a)(t=>this.getUserConfigData())).subscribe(t=>{this.buildConfigFg(t),this.ts.getSuccess("Config loaded.")},t=>{this.ts.getError(t.code)})}getUserConfigData(){return this.afs.getDocByPath("settings")}buildConfigFg(t){this.configFg=this.fb.group({workDays:g.a(null==t?void 0:t.workDays,!1,[i.o.required,f])})}updateConfig(){this.formValid=this.configFg.valid;const t=this.configFg.value;console.log(t),this.configFg.valid&&this.afs.setDocByPath("settings",t).then(t=>{this.ts.getSuccess("Saved.")},t=>{this.ts.getError("Something went wrong saving your value.")})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete(),this.ts.clearAll()}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(p.h),h.Qb(i.c),h.Qb(v),h.Qb(w))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-settings"]],decls:29,vars:2,consts:[[1,"container","mb-3"],[1,"row","mb-3","secfont","text-center","mt-3"],[1,"col-sm-12"],[1,"row","mb-2","mt-2"],[1,"col-lg-6","col-md-6","col-sm-12"],["role","alert",1,"alert","alert-primary"],[1,"col-sm-12","sub-title"],["class","full-w",3,"formGroup",4,"ngIf","ngIfElse"],["loading",""],[1,"full-w",3,"formGroup"],[1,"full-w"],["matInput","","formControlName","workDays"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary","type","button",3,"click"],["role","alert",1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"div",2),h.Wb(3,"h2"),h.Ec(4,"Milestone Configurations"),h.Vb(),h.Vb(),h.Vb(),h.Wb(5,"div",3),h.Wb(6,"div",4),h.Wb(7,"div",5),h.Ec(8," General info for 2020:"),h.Rb(9,"br"),h.Ec(10," Days in 2020 From Wednesday, January 1, 2020, to Wednesday, December 31, 2020, there are: "),h.Rb(11,"br"),h.Wb(12,"ul"),h.Wb(13,"li"),h.Ec(14," 366 days "),h.Vb(),h.Wb(15,"li"),h.Ec(16," 252 working days "),h.Vb(),h.Wb(17,"li"),h.Ec(18," 104 weekend days "),h.Vb(),h.Wb(19,"li"),h.Ec(20," 10 public holidays "),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(21,"div",3),h.Wb(22,"div",6),h.Ec(23," Overall Configurations "),h.Vb(),h.Vb(),h.Wb(24,"div",3),h.Wb(25,"div",4),h.Cc(26,x,11,4,"form",7),h.Cc(27,M,1,0,"ng-template",null,8,h.Dc),h.Vb(),h.Vb(),h.Vb()),2&t){const t=h.tc(28);h.Db(26),h.oc("ngIf",e.configFg)("ngIfElse",t)}},directives:[o.k,i.p,i.l,i.f,V.c,V.g,W.b,i.b,i.k,i.e,C.a,V.b,O],styles:[".sub-title[_ngcontent-%COMP%]{font-weight:800}"]}),t})(),canActivate:[c.a]}];let I=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(F)],a.e]}),t})(),_=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c]]}),t})(),U=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,i.g,i.n,s.a,r.a,_,I]]}),t})()}}]);